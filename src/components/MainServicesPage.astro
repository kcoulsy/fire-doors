---
import Layout from "../layouts/Layout.astro";
import Carousel from "./Carousel.astro";
import OurServices from "./OurServices.astro";
import WhyFireDoors from "./WhyFireDoors.astro";
import CommonFaults from "./CommonFaults.astro";
import MainServices from "./MainServices.astro";
import FireStats from "./FireStats.astro";
import NearbyAreas from "./NearbyAreas.astro";
import Reviews from "./Reviews.astro";

const { location, type } = Astro.params;

function capitalizeFirstLetter(string: string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}
const typeFormated = type
  ? type.split("-").map(capitalizeFirstLetter).join(" ")
  : "Fire Door Services";
const locationFormated = location ? capitalizeFirstLetter(location) : "COULSY";

// Modern SEO optimization with personal voice preserved
const seoData = {
  title: `${locationFormated} Fire Door Services - Professional Fire Door Inspection & Installation`,
  description: `Expert fire door services in ${locationFormated} including inspections, installation, maintenance and compliance. Family-run business with 35+ years experience since 1989.`,
  keywords: `fire door services ${locationFormated}, fire door inspection ${locationFormated}, fire door installation ${locationFormated}, fire safety compliance ${locationFormated}`,
  canonical: `https://coulsyfiredoors.co.uk/${location}-${type}`,
  structuredData: {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    name: `Coulsy Fire Door Services - ${locationFormated}`,
    description: `Professional fire door services in ${locationFormated} including inspections, installation, maintenance and compliance.`,
    url: `https://coulsyfiredoors.co.uk/${location}-${type}`,
    telephone: "+44 1904 123456",
          email: "robert@coulsy.co.uk",
    address: {
      "@type": "PostalAddress",
      addressLocality: locationFormated,
      addressRegion: "Yorkshire",
      addressCountry: "GB",
    },
    geo: {
      "@type": "GeoCoordinates",
      latitude: "53.9590",
      longitude: "-1.0792",
    },
    openingHours: ["Mo-Fr 08:00-18:00", "Sa 09:00-16:00"],
    priceRange: "££",
    areaServed: [locationFormated, "Yorkshire"],
    serviceArea: {
      "@type": "GeoCircle",
      geoMidpoint: {
        "@type": "GeoCoordinates",
        latitude: "53.9590",
        longitude: "-1.0792",
      },
      geoRadius: "50000",
    },
    hasOfferCatalog: {
      "@type": "OfferCatalog",
      name: "Fire Door Services",
      itemListElement: [
        {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Fire Door Inspection",
            description: "Professional fire door compliance inspections",
          },
        },
        {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Fire Door Installation",
            description: "Expert fire door installation and fitting",
          },
        },
        {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Fire Door Maintenance",
            description: "Ongoing fire door maintenance and repair",
          },
        },
      ],
    },
    foundingDate: "1989",
    founder: {
      "@type": "Person",
      name: "Robert Coulson",
      jobTitle: "Fire Door Specialist",
      description:
        "Qualified since 1989 with 35+ years of fire safety experience",
    },
    employee: [
      {
        "@type": "Person",
        name: "Robert Coulson",
        jobTitle: "Fire Door Specialist",
        description: "Qualified since 1989 with 35+ years experience",
      },
    ],
    aggregateRating: {
      "@type": "AggregateRating",
      ratingValue: "4.8",
      reviewCount: "50",
      bestRating: "5",
      worstRating: "1",
    },
    award: [
      "FireQual Fire Door Inspector",
      "CSCS Gold Card Holder",
      "Fully Insured",
      "VAT Registered",
    ],
    brand: {
      "@type": "Brand",
      name: "Coulsy Fire Door Services",
      slogan: "Fire Safety Excellence in Yorkshire",
    },
  },
};
---

<Layout
  title={seoData.title}
  description={seoData.description}
  classes="mt-8 mb-16"
>
  <!-- Hero Section with modern carousel -->
  <section class="relative z-10 mx-auto">
    <Carousel />
  </section>

  <!-- Why Fire Doors Section -->
  <section class="relative z-10 mx-auto">
    <WhyFireDoors />
  </section>

  <!-- Services Section with modern structure -->
  <section
    class="w-full py-16 lg:py-24 bg-gradient-to-b from-white to-brand-50 relative z-10"
  >
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2
          class="text-4xl lg:text-5xl font-bold text-brand-900 mb-6 text-balance"
        >
          {locationFormated} Fire Door Services
        </h2>
        <p class="text-xl text-brand-600 max-w-3xl mx-auto text-balance">
          Here's a selection of the fire door services I provide in {
            locationFormated
          }, delivered with precision and care for your safety
        </p>
      </div>
      <MainServices />
    </div>
  </section>

  <!-- Common Faults Section -->
  <section class="relative z-10 mx-auto">
    <CommonFaults />
  </section>

  <!-- Fire Statistics Section -->
  <section class="relative z-10 mx-auto">
    <FireStats />
  </section>

  <!-- Nearby Areas Section -->
  <section class="relative z-10 mx-auto">
    <NearbyAreas location={location} serviceType="fire-door-services" />
  </section>

  <!-- Testimonials Section -->
  <section class="relative z-10 mx-auto">
    <Reviews />
  </section>
</Layout>

<!-- Modern Structured Data -->
<script
  type="application/ld+json"
  set:html={JSON.stringify(seoData.structuredData)}
/>
