---
import FacebookIcon from "../icons/FacebookIcon.astro";
import InstagramIcon from "../icons/InstagramIcon.astro";
import LinkedInIcon from "../icons/LinkedInIcon.astro";
import TwitterIcon from "../icons/TwitterIcon.astro";
import Dropdown from "./Dropdown.astro";

const menuitems = [
  {
    label: "Fire Door Services",
    link: "/fire-door-services",
    // items: [
    //   { label: "Fire Door Services", link: "/fire-door-services" },
    //    { label: "Fire Door Installers", link: "/fire-door-installers" },
    //    { label: "Fire Door Inspectors", link: "/fire-door-inspectors" },
    //    { label: "Fire Door Maintenance", link: "/fire-door-maintenance" },
    //    { label: "Property Maintenance", link: "/property-maintenance" },
    // ],
  },
  {
    label: "About",
    link: "/about",
    items: [
      { label: "About Us", link: "/about" },
      { label: "Compliance", link: "/compliance" },
      { label: "Qualifications", link: "/qualifications" },
      { label: "Sustainability", link: "/sustainability" },
    ],
  },
  {
    label: "Contact",
    link: "/contact",
  },
];
---

<header
  class="flex flex-col lg:flex-row justify-between items-center bg-brand text-white"
>
  <div
    class="container mx-auto flex flex-col lg:flex-row lg:max-h-16 min-h-16 items-center"
  >
    <div class="flex w-full lg:w-auto items-center justify-between p-4">
      <a href="/" class="text-lg text-white">COULSY</a>
      <button id="mobile-nav-toggle" class="block lg:hidden">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
          class="w-6 h-6 m-2 text-white fill-white"
        >
          <path
            d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"
          ></path>
        </svg>
      </button>
    </div>
    <nav class="hidden w-full lg:w-auto items-center lg:flex lg:mt-0">
      <ul class="flex flex-col lg:flex-row lg:gap-3 mb-0 lg:h-10 max-h-40">
        {
          menuitems.map((item, index) => (
            <>
              {item.items && (
                <li>
                  <Dropdown label={item.label} items={item.items} />
                </li>
              )}

              {!item.items && (
                <li>
                  <a
                    href={item.link}
                    class="flex lg:px-3 py-2 items-center text-white hover:text-gray-200"
                  >
                    {item.label}
                  </a>
                </li>
              )}
            </>
          ))
        }
      </ul>
    </nav>
    <nav
      id="mobile-nav-menu"
      class="flex-col w-full hidden items-center bg-brand-light"
    >
      <!-- Mobile Menu -->

      <ul class="flex flex-col w-full my-2">
        {
          menuitems.map((item, index) => (
            <>
              <li class="flex flex-col justify-center items-center group">
                {item.items ? (
                  <>
                    <button class="flex px-3 py-4 items-center justify-center text-white text-center hover:text-gray-200 text-xl">
                      {item.label}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="3"
                        stroke="currentColor"
                        class="w-3 h-3 mt-0.5 group-[.is-open]:rotate-180 ml-2 transition-transform duration-300 delay-0 ease-in-out"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                        />
                      </svg>
                    </button>
                    <ul class="hidden group-[.is-open]:flex flex-col bg-brand-lighter w-full">
                      {item.items.map((subitem, index) => (
                        <li>
                          <a
                            href={subitem.link}
                            class="flex px-3 py-4 items-center justify-center text-white text-center hover:text-gray-200 text-xl"
                          >
                            {subitem.label}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </>
                ) : (
                  <a
                    href={item.link}
                    class="flex px-3 py-4 items-center justify-center text-white text-center hover:text-gray-200 text-xl"
                  >
                    {item.label}
                  </a>
                )}
              </li>
            </>
          ))
        }
      </ul>
    </nav>
    <ul class="hidden lg:flex items-center gap-4 p-0 m-0 justify-end flex-grow">
      <li class="nav-item">
        <a
          target="_blank"
          rel="noopener"
          class="nav-link"
          href="https://www.linkedin.com/company/coulsy-limited/?viewAsMember=true"
          aria-label="LinkedIn icon link"
        >
          <LinkedInIcon className="h-8 w-8 fill-white" />
        </a>
      </li>
      <!-- <li class="nav-item">
        <a
          target="_blank"
          rel="noopener"
          class="nav-link"
          href="#"
          aria-label="Facebook icon link"
        >
          <FacebookIcon className="h-8 w-8 fill-white" />
        </a>
      </li>
      <li class="nav-item">
        <a
          target="_blank"
          rel="noopener"
          class="nav-link"
          href="#"
          aria-label="Twitter icon link"
        >
          <TwitterIcon className="h-8 w-8 fill-white" />
        </a>
      </li>
      <li class="nav-item">
        <a
          target="_blank"
          rel="noopener"
          class="nav-link"
          href="#"
          aria-label="Instagram icon link"
        >
          <InstagramIcon className="h-8 w-8 fill-white" />
        </a>
      </li> -->
    </ul>
  </div>
</header>

<script>
  const mobileNavMenu = document.getElementById("mobile-nav-menu");
  const dropdowns = mobileNavMenu?.querySelectorAll("button");

  dropdowns?.forEach((dropdown) => {
    dropdown.addEventListener("click", () => {
      const parentGroup = dropdown.parentElement;
      parentGroup?.classList.toggle("is-open");
    });
  });

  const mobileNavToggle = document.getElementById("mobile-nav-toggle");

  mobileNavToggle?.addEventListener("click", () => {
    mobileNavMenu?.classList.toggle("hidden");
    mobileNavMenu?.classList.toggle("flex");
  });
</script>
